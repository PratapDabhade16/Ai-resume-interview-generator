<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>InterviewAI ‚Äî Resume Based Mock Interview</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>

  <style>
    /* ===================== RESET & ROOT ===================== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:      #070a12;
      --surface: #0d1220;
      --border:  #1e2d4a;
      --accent:  #00e5ff;
      --accent2: #7c3aed;
      --green:   #10b981;
      --red:     #ef4444;
      --yellow:  #f59e0b;
      --text:    #e2e8f0;
      --text2:   #94a3b8;
      --text3:   #475569;
      --glow:    0 0 40px rgba(0,229,255,0.12);
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Mono', monospace;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* grid background */
    body::before {
      content: '';
      position: fixed; inset: 0;
      background-image:
        linear-gradient(rgba(0,229,255,0.025) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,229,255,0.025) 1px, transparent 1px);
      background-size: 48px 48px;
      pointer-events: none; z-index: 0;
    }

    /* ===================== HEADER ===================== */
    header {
      position: sticky; top: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 18px 40px;
      background: rgba(7,10,18,0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
    }

    .logo {
      font-family: 'Syne', sans-serif;
      font-size: 18px; font-weight: 800;
      color: var(--accent); letter-spacing: -0.5px;
    }
    .logo span { color: var(--text2); font-weight: 400; }

    .progress-steps { display: flex; gap: 6px; }
    .step-bar {
      width: 32px; height: 4px;
      background: var(--border);
      transition: background 0.4s;
    }
    .step-bar.done   { background: var(--accent); }
    .step-bar.active { background: var(--accent); opacity: 0.6; }

    .header-tag {
      font-size: 11px; letter-spacing: 2px;
      color: var(--accent); border: 1px solid var(--accent);
      padding: 3px 10px; opacity: 0.7;
    }

    /* ===================== PAGES ===================== */
    .page {
      position: relative; z-index: 1;
      display: none;
    }
    .page.active { display: block; }

    /* ===================== UPLOAD PAGE ===================== */
    #page-upload {
      max-width: 720px; margin: 0 auto;
      padding: 80px 40px; text-align: center;
    }

    .eyebrow {
      font-size: 11px; letter-spacing: 4px;
      color: var(--accent); margin-bottom: 20px; opacity: 0.8;
    }

    h1 {
      font-family: 'Syne', sans-serif;
      font-size: clamp(32px, 6vw, 60px);
      font-weight: 800; line-height: 1.05;
      letter-spacing: -2px; margin-bottom: 18px;
      background: linear-gradient(135deg, #fff 0%, var(--accent) 55%, var(--accent2) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      color: var(--text2); font-size: 14px;
      line-height: 1.8; max-width: 480px;
      margin: 0 auto 48px;
    }

    /* Drop Zone */
    .drop-zone {
      border: 1px dashed var(--border);
      background: var(--surface);
      padding: 52px 40px;
      cursor: pointer;
      transition: all 0.3s;
      position: relative; overflow: hidden;
      margin-bottom: 24px;
    }
    .drop-zone::before {
      content: ''; position: absolute; inset: 0;
      background: linear-gradient(135deg, rgba(0,229,255,0.05), transparent);
      opacity: 0; transition: opacity 0.3s;
    }
    .drop-zone:hover,
    .drop-zone.drag-over {
      border-color: var(--accent);
      box-shadow: var(--glow);
    }
    .drop-zone:hover::before,
    .drop-zone.drag-over::before { opacity: 1; }

    .drop-icon   { font-size: 42px; margin-bottom: 14px; display: block; }
    .drop-title  { font-family: 'Syne', sans-serif; font-size: 17px; font-weight: 700; margin-bottom: 6px; }
    .drop-sub    { font-size: 12px; color: var(--text2); }
    .drop-ok     { font-size: 12px; color: var(--green); margin-top: 10px; }
    #file-input  { display: none; }

    /* Buttons */
    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 13px 28px;
      font-family: 'DM Mono', monospace;
      font-size: 13px; font-weight: 500;
      letter-spacing: 1px;
      cursor: pointer; border: none;
      transition: all 0.25s;
    }
    .btn-primary {
      background: var(--accent); color: var(--bg); font-weight: 700;
    }
    .btn-primary:hover {
      background: #fff;
      transform: translateY(-2px);
      box-shadow: 0 8px 28px rgba(0,229,255,0.3);
    }
    .btn-primary:disabled {
      opacity: 0.4; cursor: not-allowed; transform: none;
    }
    .btn-ghost {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text2);
    }
    .btn-ghost:hover {
      border-color: var(--accent); color: var(--accent);
    }

    .btn-row {
      display: flex; gap: 14px;
      justify-content: center; flex-wrap: wrap;
    }

    /* Supported fields chips */
    .fields-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 12px;
    }
    .fields-chips {
      display: flex; flex-wrap: wrap; gap: 8px;
      justify-content: center; margin-bottom: 48px;
    }
    .chip {
      font-size: 11px; padding: 4px 12px;
      border: 1px solid var(--border); color: var(--text2);
    }

    /* ===================== ANALYSIS PAGE ===================== */
    #page-analysis {
      max-width: 880px; margin: 0 auto;
      padding: 60px 40px;
    }

    .section-label {
      font-size: 11px; letter-spacing: 3px;
      color: var(--accent); margin-bottom: 8px; display: block;
    }
    .section-title {
      font-family: 'Syne', sans-serif;
      font-size: 30px; font-weight: 800;
      letter-spacing: -1px; margin-bottom: 32px;
    }

    /* Loading bar */
    .loading-wrap { margin-bottom: 40px; }
    .loading-status {
      font-size: 12px; color: var(--text2); margin-bottom: 10px;
    }
    .loading-bar {
      height: 2px; background: var(--border); overflow: hidden;
    }
    .loading-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      animation: loadBar 1.5s ease-in-out infinite;
    }
    @keyframes loadBar {
      0%   { width: 0%;  margin-left: 0; }
      50%  { width: 60%; }
      100% { width: 0%;  margin-left: 100%; }
    }

    /* Analysis content */
    .analysis-content { display: none; }

    .role-pill {
      display: inline-flex; align-items: center; gap: 8px;
      background: rgba(0,229,255,0.08);
      border: 1px solid rgba(0,229,255,0.25);
      padding: 6px 16px; font-size: 12px;
      color: var(--accent); margin-bottom: 28px;
    }
    .role-pill-dot {
      width: 6px; height: 6px;
      background: var(--accent); border-radius: 50%;
      animation: blink 2s infinite;
    }
    @keyframes blink { 0%,100%{opacity:1;} 50%{opacity:.3;} }

    .cards-grid {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 18px; margin-bottom: 18px;
    }
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 22px;
    }
    .card-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 14px;
    }
    .skills-wrap { display: flex; flex-wrap: wrap; gap: 8px; }
    .skill-tag {
      font-size: 11px; padding: 3px 11px;
      border: 1px solid var(--border); color: var(--text2);
    }
    .skill-tag.top {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(0,229,255,0.07);
    }
    .highlight-item {
      font-size: 12px; color: var(--text2);
      padding: 6px 0; border-bottom: 1px solid var(--border);
      line-height: 1.5;
    }
    .highlight-item:last-child { border-bottom: none; }

    .meta-row {
      display: flex; gap: 24px; flex-wrap: wrap;
      margin-bottom: 6px;
    }
    .meta-item {}
    .meta-key { font-size: 11px; color: var(--text3); margin-bottom: 3px; }
    .meta-val {
      font-family: 'Syne', sans-serif;
      font-size: 14px; font-weight: 700;
    }
    .meta-val.accent { color: var(--accent); }

    /* Rounds preview */
    .rounds-grid {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 14px; margin: 20px 0 28px;
    }
    .round-preview {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 20px; position: relative;
    }
    .round-preview::before {
      content: ''; position: absolute;
      top: 0; left: 0; right: 0; height: 3px;
    }
    .round-preview.r1::before { background: var(--green); }
    .round-preview.r2::before { background: var(--yellow); }
    .round-preview.r3::before { background: var(--red); }
    .rp-emoji  { font-size: 18px; margin-bottom: 8px; display: block; }
    .rp-name   { font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 700; margin-bottom: 4px; }
    .rp-theme  { font-size: 11px; color: var(--text2); line-height: 1.5; margin-bottom: 8px; }
    .rp-thresh { font-size: 11px; color: var(--text3); }

    /* ===================== INTERVIEW PAGE ===================== */
    #page-interview {
      max-width: 800px; margin: 0 auto;
      padding: 40px;
    }

    .interview-top {
      display: flex; align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 32px; padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap; gap: 12px;
    }
    .round-badge-wrap { display: flex; align-items: center; gap: 12px; }
    .round-dot {
      width: 10px; height: 10px;
    }
    .round-dot.r1 { background: var(--green);  box-shadow: 0 0 10px var(--green); }
    .round-dot.r2 { background: var(--yellow); box-shadow: 0 0 10px var(--yellow); }
    .round-dot.r3 { background: var(--red);    box-shadow: 0 0 10px var(--red); }
    .round-title   { font-family: 'Syne', sans-serif; font-size: 15px; font-weight: 700; }
    .round-sub     { font-size: 11px; color: var(--text2); margin-top: 2px; }
    .q-info        { font-size: 12px; color: var(--text2); text-align: right; }

    .progress-bar-wrap {
      height: 2px; background: var(--border);
      margin-bottom: 32px; overflow: hidden;
    }
    .progress-bar-fill {
      height: 100%; width: 0%;
      transition: width 0.5s ease;
    }
    .progress-bar-fill.r1 { background: var(--green); }
    .progress-bar-fill.r2 { background: var(--yellow); }
    .progress-bar-fill.r3 { background: var(--red); }

    .question-card {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 28px; margin-bottom: 20px;
      position: relative;
    }
    .question-card::before {
      content: ''; position: absolute;
      left: 0; top: 0; bottom: 0; width: 3px;
      background: linear-gradient(180deg, var(--accent), var(--accent2));
    }
    .q-tag {
      font-size: 11px; letter-spacing: 2px;
      color: var(--accent); margin-bottom: 12px;
      display: flex; align-items: center; gap: 8px;
    }
    .q-tag::after {
      content: ''; flex: 1; height: 1px;
      background: var(--border);
    }
    .q-text {
      font-family: 'Syne', sans-serif;
      font-size: 18px; font-weight: 600;
      line-height: 1.55; color: var(--text);
    }
    .q-hint {
      font-size: 12px; color: var(--text2);
      margin-top: 12px; padding-top: 12px;
      border-top: 1px solid var(--border);
      line-height: 1.6;
    }

    .answer-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 10px;
    }
    textarea {
      width: 100%;
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text);
      font-family: 'DM Mono', monospace;
      font-size: 13px; line-height: 1.8;
      padding: 16px; resize: vertical;
      min-height: 160px; outline: none;
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    textarea:focus {
      border-color: var(--accent);
      box-shadow: var(--glow);
    }
    textarea::placeholder { color: var(--text3); }
    textarea:disabled { opacity: 0.5; }

    .answer-footer {
      display: flex; justify-content: space-between;
      align-items: center; margin-top: 12px;
    }
    .word-count { font-size: 11px; color: var(--text3); }

    /* ===================== EVAL OVERLAY ===================== */
    .overlay {
      position: fixed; inset: 0;
      background: rgba(7,10,18,0.93);
      backdrop-filter: blur(10px);
      display: none; align-items: center;
      justify-content: center; z-index: 200;
    }
    .overlay.show { display: flex; }

    .overlay-card {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 40px; max-width: 560px;
      width: 92%; max-height: 82vh;
      overflow-y: auto;
      animation: popIn 0.3s ease;
    }
    @keyframes popIn {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .eval-header-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 16px;
    }
    .score-row {
      display: flex; align-items: baseline;
      gap: 6px; margin-bottom: 16px;
    }
    .score-big {
      font-family: 'Syne', sans-serif;
      font-size: 64px; font-weight: 800; line-height: 1;
    }
    .score-den { font-size: 20px; color: var(--text3); }
    .score-note {
      font-size: 13px; color: var(--text2);
      margin-left: 10px; line-height: 1.4;
    }
    .score-track {
      height: 4px; background: var(--border); margin-bottom: 24px;
    }
    .score-track-fill { height: 100%; transition: width 0.9s ease; }

    .verdict-tag {
      display: inline-block;
      font-family: 'Syne', sans-serif;
      font-size: 12px; font-weight: 700;
      padding: 5px 16px; letter-spacing: 1px;
      margin-bottom: 20px;
    }
    .verdict-tag.pass {
      background: rgba(16,185,129,0.1);
      border: 1px solid var(--green); color: var(--green);
    }
    .verdict-tag.fail {
      background: rgba(239,68,68,0.1);
      border: 1px solid var(--red); color: var(--red);
    }

    .eval-section { margin-bottom: 16px; }
    .eval-sec-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 8px;
    }
    .eval-chips { display: flex; flex-wrap: wrap; gap: 7px; }
    .eval-chip {
      font-size: 11px; padding: 3px 11px; border: 1px solid;
    }
    .eval-chip.good { border-color: var(--green); color: var(--green); }
    .eval-chip.bad  { border-color: var(--red);   color: var(--red); }
    .eval-text { font-size: 13px; color: var(--text2); line-height: 1.7; }

    /* ===================== ROUND RESULT PAGE ===================== */
    #page-round-result {
      max-width: 600px; margin: 0 auto;
      padding: 80px 40px; text-align: center;
    }

    .big-icon  { font-size: 64px; display: block; margin-bottom: 18px; }
    .big-title {
      font-family: 'Syne', sans-serif;
      font-size: 38px; font-weight: 800;
      letter-spacing: -1px; margin-bottom: 10px;
    }
    .big-sub {
      font-size: 14px; color: var(--text2);
      line-height: 1.7; margin-bottom: 28px;
    }

    .score-pills {
      display: flex; gap: 10px;
      justify-content: center; flex-wrap: wrap;
      margin-bottom: 28px;
    }
    .score-pill {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 10px 16px;
      font-family: 'Syne', sans-serif;
      font-size: 16px; font-weight: 700;
    }

    .feedback-box {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 20px; text-align: left;
      font-size: 13px; color: var(--text2);
      line-height: 1.8; margin-bottom: 28px;
    }
    .feedback-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 10px;
    }

    /* ===================== FINAL RESULT PAGE ===================== */
    #page-result {
      max-width: 740px; margin: 0 auto;
      padding: 80px 40px; text-align: center;
    }

    .verdict-hero {
      font-family: 'Syne', sans-serif;
      font-size: 44px; font-weight: 800;
      letter-spacing: -2px; margin-bottom: 14px;
    }
    .verdict-hero.hire    { color: var(--green); }
    .verdict-hero.consider{ color: var(--yellow); }
    .verdict-hero.reject  { color: var(--red); }

    .stats-grid {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 16px; margin: 36px 0; text-align: left;
    }
    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border); padding: 20px;
    }
    .stat-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 6px;
    }
    .stat-val {
      font-family: 'Syne', sans-serif;
      font-size: 32px; font-weight: 800;
    }
    .stat-val.green  { color: var(--green); }
    .stat-val.yellow { color: var(--yellow); }
    .stat-val.red    { color: var(--red); }
    .stat-val.accent { color: var(--accent); font-size: 17px; padding-top: 7px; }

    .rounds-summary { text-align: left; margin-bottom: 28px; }
    .rs-item {
      display: flex; align-items: center; gap: 12px;
      padding: 12px 16px;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
    }
    .rs-name { flex: 1; font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 700; }
    .rs-theme { font-size: 11px; color: var(--text3); margin-top: 2px; }
    .rs-score {
      font-family: 'Syne', sans-serif;
      font-size: 20px; font-weight: 700;
      min-width: 52px; text-align: right;
    }
    .rs-badge {
      font-size: 11px; padding: 3px 10px;
      border: 1px solid; min-width: 76px; text-align: center;
    }
    .rs-badge.pass { border-color: var(--green); color: var(--green); }
    .rs-badge.fail { border-color: var(--red);   color: var(--red); }
    .rs-badge.skip { border-color: var(--text3); color: var(--text3); }

    .recommendation-box {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 22px; text-align: left;
      margin-bottom: 28px;
    }
    .rec-label {
      font-size: 11px; letter-spacing: 2px;
      color: var(--text3); margin-bottom: 12px;
    }
    .rec-text {
      font-size: 13px; color: var(--text2); line-height: 1.8;
    }
    .rec-text + .rec-text { margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); }

    /* ===================== TOAST ===================== */
    .toast {
      position: fixed; bottom: 24px; right: 24px;
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 14px 20px; z-index: 300;
      max-width: 320px;
      animation: slideUp 0.3s ease;
      box-shadow: 0 8px 28px rgba(0,0,0,0.4);
      display: none;
    }
    .toast.show { display: block; }
    @keyframes slideUp {
      from { opacity:0; transform: translateY(8px); }
      to   { opacity:1; transform: translateY(0); }
    }
    .toast-title {
      font-family: 'Syne', sans-serif;
      font-size: 13px; font-weight: 700; margin-bottom: 3px;
    }
    .toast-msg { font-size: 12px; color: var(--text2); line-height: 1.5; }

    /* ===================== SPINNER ===================== */
    .spinner {
      display: inline-block;
      width: 16px; height: 16px;
      border: 2px solid rgba(0,0,0,0.3);
      border-top-color: var(--bg);
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      vertical-align: middle;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ===================== RESPONSIVE ===================== */
    @media (max-width: 640px) {
      header { padding: 14px 18px; }
      #page-upload, #page-analysis, #page-interview,
      #page-round-result, #page-result { padding: 36px 18px; }
      .cards-grid, .rounds-grid, .stats-grid { grid-template-columns: 1fr; }
      h1 { font-size: 32px; }
      .overlay-card { padding: 24px; }
      .score-big { font-size: 52px; }
    }
  </style>
</head>

<body>

  <!-- ==================== HEADER ==================== -->
  <header>
    <div class="logo">InterviewAI<span>.system</span></div>
    <div class="progress-steps">
      <div class="step-bar" id="step1"></div>
      <div class="step-bar" id="step2"></div>
      <div class="step-bar" id="step3"></div>
      <div class="step-bar" id="step4"></div>
    </div>
    <div class="header-tag">UNIVERSAL AI</div>
  </header>

  <!-- ==================== PAGE: UPLOAD ==================== -->
  <div class="page active" id="page-upload">
    <div class="eyebrow">AI MOCK INTERVIEW ¬∑ ANY JOB ¬∑ ANY FIELD</div>
    <h1>Your Resume.<br/>Your Interview.</h1>
    <p class="subtitle">
      Upload your resume. AI detects your role and field automatically, then
      runs a personalised 3-round interview ‚Äî whether you're a Developer,
      Designer, Doctor, Marketer, or anything else.
    </p>

    <div class="fields-label">WORKS FOR ALL FIELDS</div>
    <div class="fields-chips">
      <span class="chip">Software Dev</span><span class="chip">Data Science</span>
      <span class="chip">UI/UX Design</span><span class="chip">Marketing</span>
      <span class="chip">Finance</span><span class="chip">Healthcare</span>
      <span class="chip">HR & Talent</span><span class="chip">Civil Engg</span>
      <span class="chip">Business Analysis</span><span class="chip">Education</span>
      <span class="chip">Sales</span><span class="chip">Legal</span>
      <span class="chip">Cybersecurity</span><span class="chip">Consulting</span>
      <span class="chip">Architecture</span><span class="chip">Journalism</span>
    </div>

    <div class="drop-zone" id="drop-zone">
      <input type="file" id="file-input" accept=".pdf" />
      <span class="drop-icon">üìÑ</span>
      <div class="drop-title" id="drop-title">Drop your resume here</div>
      <div class="drop-sub">PDF only ¬∑ Click to browse</div>
      <div class="drop-ok" id="drop-ok" style="display:none"></div>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" id="btn-start" disabled>
        ‚ñ∂ Start Interview
      </button>
    </div>
  </div>

  <!-- ==================== PAGE: ANALYSIS ==================== -->
  <div class="page" id="page-analysis">
    <span class="section-label">RESUME ANALYSIS</span>
    <h2 class="section-title" id="analysis-title">Analyzing your resume‚Ä¶</h2>

    <div class="loading-wrap" id="analysis-loading">
      <div class="loading-status" id="loading-status">Detecting your field and role‚Ä¶</div>
      <div class="loading-bar"><div class="loading-bar-fill"></div></div>
    </div>

    <div class="analysis-content" id="analysis-content">
      <div class="role-pill">
        <span class="role-pill-dot"></span>
        <span id="pill-text"></span>
      </div>

      <div class="card" style="margin-bottom:18px">
        <div class="card-label">AI PROFILE ASSESSMENT</div>
        <div class="meta-row" id="meta-row"></div>
        <div style="font-size:13px;color:var(--text2);line-height:1.7;margin-top:12px" id="summary-text"></div>
      </div>

      <div class="cards-grid">
        <div class="card">
          <div class="card-label">SKILLS FROM RESUME</div>
          <div class="skills-wrap" id="skills-wrap"></div>
        </div>
        <div class="card">
          <div class="card-label">EXPERIENCE HIGHLIGHTS</div>
          <div id="highlights-wrap"></div>
        </div>
      </div>

      <div class="rounds-grid" id="rounds-grid"></div>

      <div style="text-align:center; margin-top:8px">
        <button class="btn btn-primary" id="btn-begin-r1">‚ñ∂ Begin Round 1</button>
      </div>
    </div>
  </div>

  <!-- ==================== PAGE: INTERVIEW ==================== -->
  <div class="page" id="page-interview">
    <div class="interview-top">
      <div class="round-badge-wrap">
        <div class="round-dot" id="round-dot"></div>
        <div>
          <div class="round-title" id="round-title"></div>
          <div class="round-sub"  id="round-sub"></div>
        </div>
      </div>
      <div class="q-info" id="q-info"></div>
    </div>

    <div class="progress-bar-wrap">
      <div class="progress-bar-fill" id="progress-fill"></div>
    </div>

    <div class="question-card">
      <div class="q-tag" id="q-tag"></div>
      <div class="q-text" id="q-text">Loading question‚Ä¶</div>
      <div class="q-hint" id="q-hint"></div>
    </div>

    <div class="answer-label">YOUR ANSWER</div>
    <textarea id="answer-box" rows="6" placeholder="Type your answer here‚Ä¶"></textarea>
    <div class="answer-footer">
      <span class="word-count" id="word-count">0 words</span>
      <button class="btn btn-primary" id="btn-submit-answer">Submit Answer ‚Üí</button>
    </div>
  </div>

  <!-- ==================== PAGE: ROUND RESULT ==================== -->
  <div class="page" id="page-round-result">
    <span class="big-icon" id="rr-icon"></span>
    <div class="big-title" id="rr-title"></div>
    <div class="big-sub"   id="rr-sub"></div>

    <div class="score-pills" id="rr-pills"></div>

    <div class="feedback-box">
      <div class="feedback-label">ROUND FEEDBACK FROM AI</div>
      <div id="rr-feedback"></div>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" id="btn-next-round" style="display:none"></button>
      <button class="btn btn-ghost"   id="btn-retry"      style="display:none">‚Ü© Retry from Upload</button>
    </div>
  </div>

  <!-- ==================== PAGE: FINAL RESULT ==================== -->
  <div class="page" id="page-result">
    <span class="big-icon" id="fr-icon"></span>
    <div class="verdict-hero" id="fr-verdict"></div>
    <div class="big-sub"     id="fr-sub"></div>

    <div class="stats-grid" id="fr-stats"></div>

    <div class="rounds-summary" id="fr-rounds"></div>

    <div class="recommendation-box">
      <div class="rec-label">AI RECOMMENDATION</div>
      <div class="rec-text" id="fr-recommendation"></div>
      <div class="rec-text" id="fr-next-steps"></div>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" id="btn-restart">‚Ü© Start New Interview</button>
    </div>
  </div>

  <!-- ==================== EVAL OVERLAY ==================== -->
  <div class="overlay" id="eval-overlay">
    <div class="overlay-card">
      <div class="eval-header-label" id="eval-header-label"></div>
      <div class="score-row">
        <div class="score-big" id="eval-score"></div>
        <div class="score-den">/10</div>
        <div class="score-note" id="eval-highlight"></div>
      </div>
      <div class="score-track">
        <div class="score-track-fill" id="eval-track"></div>
      </div>
      <div class="verdict-tag" id="eval-verdict"></div>

      <div class="eval-section">
        <div class="eval-sec-label">STRENGTHS</div>
        <div class="eval-chips" id="eval-strengths"></div>
      </div>
      <div class="eval-section">
        <div class="eval-sec-label">AREAS TO IMPROVE</div>
        <div class="eval-chips" id="eval-weaknesses"></div>
      </div>
      <div class="eval-section">
        <div class="eval-sec-label">IMPROVEMENT TIP</div>
        <div class="eval-text" id="eval-tip"></div>
      </div>

      <div style="text-align:right; margin-top:22px">
        <button class="btn btn-primary" id="btn-next-q">Next Question ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- ==================== TOAST ==================== -->
  <div class="toast" id="toast">
    <div class="toast-title" id="toast-title"></div>
    <div class="toast-msg"   id="toast-msg"></div>
  </div>

  <!-- ==================== SCRIPT ==================== -->
  <script>
    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    const state = {
      resumeFile:    null,
      resumeData:    null,
      roundNumber:   1,
      questions:     [],
      qIndex:        0,
      scores:        [],
      answers:       [],
      allRoundsData: [],
      currentEval:   null,
    };

    const ROUND_COLORS = { 1: "r1", 2: "r2", 3: "r3" };
    const ROUND_EMOJIS = { 1: "üü¢", 2: "üü°", 3: "üî¥" };

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    function showPage(id) {
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function updateSteps(active) {
      [1,2,3,4].forEach(i => {
        const el = document.getElementById("step" + i);
        el.classList.remove("done", "active");
        if (i < active)  el.classList.add("done");
        if (i === active) el.classList.add("active");
      });
    }

    function scoreColor(s) {
      return s >= 8 ? "var(--green)" : s >= 6 ? "var(--yellow)" : "var(--red)";
    }
    function scoreClass(s) {
      return s >= 8 ? "green" : s >= 6 ? "yellow" : "red";
    }

    function toast(title, msg, color = "var(--accent)") {
      const t = document.getElementById("toast");
      document.getElementById("toast-title").textContent = title;
      document.getElementById("toast-title").style.color = color;
      document.getElementById("toast-msg").textContent = msg;
      t.classList.add("show");
      setTimeout(() => t.classList.remove("show"), 4000);
    }

    function setBtn(id, html, disabled = false) {
      const b = document.getElementById(id);
      b.innerHTML = html;
      b.disabled = disabled;
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ UPLOAD PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    const dropZone  = document.getElementById("drop-zone");
    const fileInput = document.getElementById("file-input");

    dropZone.addEventListener("click", () => fileInput.click());
    dropZone.addEventListener("dragover",  e => { e.preventDefault(); dropZone.classList.add("drag-over"); });
    dropZone.addEventListener("dragleave", () => dropZone.classList.remove("drag-over"));
    dropZone.addEventListener("drop", e => {
      e.preventDefault();
      dropZone.classList.remove("drag-over");
      handleFile(e.dataTransfer.files[0]);
    });
    fileInput.addEventListener("change", () => handleFile(fileInput.files[0]));

    function handleFile(file) {
      if (!file) return;
      if (!file.name.endsWith(".pdf")) {
        toast("Wrong format", "Please upload a PDF file.", "var(--red)"); return;
      }
      state.resumeFile = file;
      document.getElementById("drop-title").textContent = file.name;
      document.getElementById("drop-ok").textContent = "‚úì Ready ‚Äî click Start Interview";
      document.getElementById("drop-ok").style.display = "block";
      document.getElementById("btn-start").disabled = false;
    }

    document.getElementById("btn-start").addEventListener("click", startInterview);

    async function startInterview() {
      setBtn("btn-start", '<span class="spinner"></span> Analyzing‚Ä¶', true);
      updateSteps(1);
      showPage("page-analysis");

      const formData = new FormData();
      formData.append("resume", state.resumeFile);

      try {
        document.getElementById("loading-status").textContent = "Detecting your field and role‚Ä¶";
        const res  = await fetch("/analyze-resume", { method: "POST", body: formData });
        const data = await res.json();

        if (!data.success) throw new Error(data.error || "Analysis failed");

        state.resumeData = data.analysis;
        renderAnalysis(data.analysis);
        toast("Resume Analyzed!", `${data.analysis.role} in ${data.analysis.field} detected.`, "var(--green)");
      } catch (err) {
        toast("Error", err.message, "var(--red)");
        showPage("page-upload");
        setBtn("btn-start", "‚ñ∂ Start Interview", false);
      }
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ANALYSIS PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    function renderAnalysis(a) {
      document.getElementById("analysis-title").textContent = `${a.name} ¬∑ ${a.role}`;
      document.getElementById("pill-text").textContent =
        `${a.field}  ¬∑  ${a.experience}  ¬∑  ${a.interviewStyle === "technical" ? "Technical" : a.interviewStyle === "behavioral" ? "Behavioral" : "Mixed"} Interview`;

      // Meta
      document.getElementById("meta-row").innerHTML = `
        <div class="meta-item"><div class="meta-key">ROLE</div><div class="meta-val accent">${a.role}</div></div>
        <div class="meta-item"><div class="meta-key">FIELD</div><div class="meta-val">${a.field}</div></div>
        <div class="meta-item"><div class="meta-key">EXPERIENCE</div><div class="meta-val">${a.experience}</div></div>
      `;
      document.getElementById("summary-text").textContent = a.summary;

      // Skills
      document.getElementById("skills-wrap").innerHTML =
        (a.skills || []).map(s =>
          `<span class="skill-tag ${a.topSkills?.includes(s) ? "top" : ""}">${s}</span>`
        ).join("");

      // Highlights
      document.getElementById("highlights-wrap").innerHTML =
        (a.highlights || []).map(h => `<div class="highlight-item">‚Ä¢ ${h}</div>`).join("");

      // Round previews
      const themes = [a.round1Theme, a.round2Theme, a.round3Theme];
      const names  = ["Foundation", "Application", "Strategy"];
      const thresh = [6, 7, 8];
      document.getElementById("rounds-grid").innerHTML = [1,2,3].map(i => `
        <div class="round-preview r${i}">
          <span class="rp-emoji">${ROUND_EMOJIS[i]}</span>
          <div class="rp-name">Round ${i}: ${names[i-1]}</div>
          <div class="rp-theme">${themes[i-1] || ""}</div>
          <div class="rp-thresh">Pass: avg ‚â• ${thresh[i-1]}/10 ¬∑ 5 questions</div>
        </div>
      `).join("");

      // Update "Begin Round 1" label
      document.getElementById("btn-begin-r1").textContent =
        `‚ñ∂ Begin Round 1: ${(a.round1Theme || "").split(" ").slice(0,4).join(" ")}`;

      // Show content
      document.getElementById("analysis-loading").style.display = "none";
      document.getElementById("analysis-content").style.display = "block";
      updateSteps(2);
    }

    document.getElementById("btn-begin-r1").addEventListener("click", () => {
      state.roundNumber = 1;
      loadRound(1);
    });

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ INTERVIEW PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    async function loadRound(roundNum) {
      state.roundNumber = roundNum;
      state.questions   = [];
      state.qIndex      = 0;
      state.scores      = [];
      state.answers     = [];

      showPage("page-interview");
      updateSteps(3);

      const colorClass = ROUND_COLORS[roundNum];
      document.getElementById("round-dot").className = `round-dot ${colorClass}`;
      document.getElementById("q-text").textContent  = "Generating questions‚Ä¶";
      document.getElementById("answer-box").value    = "";
      document.getElementById("btn-submit-answer").disabled = true;

      const themes = [
        state.resumeData.round1Theme,
        state.resumeData.round2Theme,
        state.resumeData.round3Theme,
      ];

      try {
        const res  = await fetch("/generate-questions", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ resumeData: state.resumeData, roundNumber: roundNum }),
        });
        const data = await res.json();
        if (!data.success) throw new Error(data.error);

        state.questions = data.questions;

        document.getElementById("round-title").textContent =
          `Round ${roundNum}: ${data.roundInfo.name}`;
        document.getElementById("round-sub").textContent = themes[roundNum - 1] || "";

        renderQuestion();
        document.getElementById("btn-submit-answer").disabled = false;
        toast(`Round ${roundNum} Ready`, `${data.questions.length} questions loaded.`, "var(--accent)");
      } catch (err) {
        toast("Error", err.message, "var(--red)");
      }
    }

    function renderQuestion() {
      const q = state.questions[state.qIndex];
      const total = state.questions.length;
      const roundNum = state.roundNumber;
      const colorClass = ROUND_COLORS[roundNum];
      const thresh = [6, 7, 8][roundNum - 1];

      document.getElementById("q-tag").textContent =
        `${state.resumeData.role.toUpperCase()} ¬∑ ROUND ${roundNum} ¬∑ QUESTION ${state.qIndex + 1}`;
      document.getElementById("q-text").textContent = q;
      document.getElementById("q-info").innerHTML =
        `Q${state.qIndex + 1} of ${total}<br><span style="font-size:11px;color:var(--text3)">Pass threshold: ${thresh}/10</span>`;

      // Hint based on interview style
      const hints = {
        technical:  "üí° Be specific ‚Äî mention tools, methods, metrics, or techniques you used.",
        behavioral: "üí° Use STAR format: Situation ‚Üí Task ‚Üí Action ‚Üí Result.",
        mixed:      "üí° Combine domain knowledge with real examples from your experience.",
      };
      document.getElementById("q-hint").textContent =
        hints[state.resumeData.interviewStyle] || hints.mixed;

      // Progress bar
      const pct = (state.qIndex / total) * 100;
      const pf  = document.getElementById("progress-fill");
      pf.className = `progress-bar-fill ${colorClass}`;
      pf.style.width = pct + "%";

      // Reset textarea
      document.getElementById("answer-box").value = "";
      document.getElementById("word-count").textContent = "0 words";
    }

    // Word count
    document.getElementById("answer-box").addEventListener("input", function() {
      const words = this.value.trim().split(/\s+/).filter(Boolean).length;
      document.getElementById("word-count").textContent = words + " words";
    });

    // Submit answer
    document.getElementById("btn-submit-answer").addEventListener("click", submitAnswer);

    async function submitAnswer() {
      const answer = document.getElementById("answer-box").value.trim();
      if (!answer) { toast("Empty answer", "Please type an answer first.", "var(--yellow)"); return; }

      setBtn("btn-submit-answer", '<span class="spinner"></span> Evaluating‚Ä¶', true);

      try {
        const res  = await fetch("/evaluate-answer", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            question:    state.questions[state.qIndex],
            answer,
            resumeData:  state.resumeData,
            roundNumber: state.roundNumber,
          }),
        });
        const data = await res.json();
        if (!data.success) throw new Error(data.error);

        state.currentEval = data.evaluation;
        state.scores.push(data.evaluation.score);
        state.answers.push(answer);

        renderEvalOverlay(data.evaluation);
      } catch (err) {
        toast("Error", err.message, "var(--red)");
        setBtn("btn-submit-answer", "Submit Answer ‚Üí", false);
      }
    }

    function renderEvalOverlay(ev) {
      const roundNum = state.roundNumber;
      const thresh   = [6, 7, 8][roundNum - 1];
      const pass     = ev.score >= thresh;
      const color    = scoreColor(ev.score);

      document.getElementById("eval-header-label").textContent =
        `${state.resumeData.role.toUpperCase()} ¬∑ ROUND ${roundNum} EVALUATION`;

      document.getElementById("eval-score").textContent = ev.score;
      document.getElementById("eval-score").style.color = color;
      document.getElementById("eval-highlight").textContent = ev.highlight || "";

      document.getElementById("eval-track").style.width = (ev.score * 10) + "%";
      document.getElementById("eval-track").style.background = color;

      const vTag = document.getElementById("eval-verdict");
      vTag.textContent = ev.verdict;
      vTag.className   = `verdict-tag ${pass ? "pass" : "fail"}`;

      document.getElementById("eval-strengths").innerHTML =
        (ev.strengths || []).map(s => `<span class="eval-chip good">‚úì ${s}</span>`).join("");
      document.getElementById("eval-weaknesses").innerHTML =
        (ev.weaknesses || []).map(w => `<span class="eval-chip bad">‚Üí ${w}</span>`).join("");
      document.getElementById("eval-tip").textContent = ev.improvement || "";

      // Next button label
      const isLast = state.qIndex + 1 >= state.questions.length;
      document.getElementById("btn-next-q").textContent =
        isLast ? "See Round Result ‚Üí" : "Next Question ‚Üí";

      document.getElementById("eval-overlay").classList.add("show");
      setBtn("btn-submit-answer", "Submit Answer ‚Üí", false);
    }

    // Next question button
    document.getElementById("btn-next-q").addEventListener("click", async () => {
      document.getElementById("eval-overlay").classList.remove("show");

      const isLast = state.qIndex + 1 >= state.questions.length;

      if (!isLast) {
        state.qIndex++;
        renderQuestion();
      } else {
        // Submit round
        await submitRound();
      }
    });

    async function submitRound() {
      setBtn("btn-submit-answer", '<span class="spinner"></span> Calculating‚Ä¶', true);

      try {
        const res  = await fetch("/submit-round", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            resumeData:  state.resumeData,
            roundNumber: state.roundNumber,
            questions:   state.questions,
            answers:     state.answers,
            scores:      state.scores,
          }),
        });
        const data = await res.json();
        if (!data.success) throw new Error(data.error);

        state.allRoundsData.push(data);
        renderRoundResult(data);
      } catch (err) {
        toast("Error", err.message, "var(--red)");
        setBtn("btn-submit-answer", "Submit Answer ‚Üí", false);
      }
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ROUND RESULT PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    function renderRoundResult(data) {
      showPage("page-round-result");
      updateSteps(3);

      const passed = data.roundPassed;
      const avg    = data.averageScore;

      document.getElementById("rr-icon").textContent  = passed ? "üéØ" : "üòì";
      document.getElementById("rr-title").textContent = passed ? "Round Cleared!" : "Round Failed";
      document.getElementById("rr-title").style.color = passed ? "var(--green)" : "var(--red)";
      document.getElementById("rr-sub").innerHTML =
        `Round ${data.roundNumber}: ${data.roundName} &nbsp;¬∑&nbsp; 
         Average: <strong style="color:${scoreColor(avg)}">${avg}/10</strong> 
         &nbsp;(required ${data.passThreshold}/10)`;

      // Score pills
      document.getElementById("rr-pills").innerHTML =
        data.scoreBreakdown.map(s =>
          `<div class="score-pill" style="color:${scoreColor(s.score)}">Q${s.question}: ${s.score}/10</div>`
        ).join("");

      document.getElementById("rr-feedback").textContent = data.feedback || "";

      const btnNext  = document.getElementById("btn-next-round");
      const btnRetry = document.getElementById("btn-retry");

      if (passed && data.canProceed) {
        btnNext.textContent = `‚ñ∂ Proceed to Round ${data.nextRound}`;
        btnNext.style.display = "inline-flex";
        btnRetry.style.display = "none";
        btnNext.onclick = () => loadRound(data.nextRound);
      } else if (passed && data.isLastRound) {
        // All rounds done
        btnNext.textContent = "‚ñ∂ See Final Report";
        btnNext.style.display = "inline-flex";
        btnRetry.style.display = "none";
        btnNext.onclick = () => loadFinalReport();
      } else {
        // Failed
        btnNext.style.display = "none";
        btnRetry.style.display = "inline-flex";
      }
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FINAL REPORT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    async function loadFinalReport() {
      try {
        const res  = await fetch("/final-report", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            resumeData:    state.resumeData,
            allRoundsData: state.allRoundsData,
          }),
        });
        const data = await res.json();
        if (!data.success) throw new Error(data.error);
        renderFinalReport(data.report);
      } catch (err) {
        toast("Error", err.message, "var(--red)");
      }
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FINAL RESULT PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    function renderFinalReport(report) {
      showPage("page-result");
      updateSteps(4);

      const verdictMap = {
        HIRE:    { icon: "üèÜ", text: "Hire Recommended",   css: "hire"    },
        CONSIDER:{ icon: "‚ö°", text: "Worth Considering",   css: "consider"},
        REJECT:  { icon: "üìã", text: "Needs More Practice", css: "reject"  },
      };
      const v = verdictMap[report.overallVerdict] || verdictMap.CONSIDER;

      document.getElementById("fr-icon").textContent    = v.icon;
      document.getElementById("fr-verdict").textContent = v.text;
      document.getElementById("fr-verdict").className   = `verdict-hero ${v.css}`;
      document.getElementById("fr-sub").textContent =
        `${report.candidateName} ¬∑ ${report.roleAssessed} ¬∑ ${report.fieldAssessed}`;

      // Stats
      const avgColor = scoreClass(report.overallScore);
      document.getElementById("fr-stats").innerHTML = `
        <div class="stat-card">
          <div class="stat-label">OVERALL SCORE</div>
          <div class="stat-val ${avgColor}">${report.overallScore}</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ROUNDS CLEARED</div>
          <div class="stat-val ${report.roundsPassed === report.totalRounds ? "green" : report.roundsPassed >= 1 ? "yellow" : "red"}">${report.roundsPassed}/${report.totalRounds}</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">VERDICT</div>
          <div class="stat-val accent">${report.overallVerdict}</div>
        </div>
      `;

      // Round summary
      const themes = [
        state.resumeData.round1Theme,
        state.resumeData.round2Theme,
        state.resumeData.round3Theme,
      ];
      const names = ["Foundation", "Application", "Strategy"];
      document.getElementById("fr-rounds").innerHTML =
        [1,2,3].map(i => {
          const rd = state.allRoundsData[i-1];
          if (rd) {
            return `
              <div class="rs-item">
                <span style="font-size:18px">${ROUND_EMOJIS[i]}</span>
                <div class="rs-name">Round ${i}: ${names[i-1]}
                  <div class="rs-theme">${themes[i-1] || ""}</div>
                </div>
                <div class="rs-score" style="color:${scoreColor(rd.averageScore)}">${rd.averageScore}</div>
                <div class="rs-badge ${rd.roundPassed ? "pass" : "fail"}">${rd.roundPassed ? "PASSED" : "FAILED"}</div>
              </div>`;
          } else {
            return `
              <div class="rs-item">
                <span style="font-size:18px">${ROUND_EMOJIS[i]}</span>
                <div class="rs-name">Round ${i}: ${names[i-1]}
                  <div class="rs-theme">${themes[i-1] || ""}</div>
                </div>
                <div class="rs-badge skip">NOT REACHED</div>
              </div>`;
          }
        }).join("");

      // Recommendation
      document.getElementById("fr-recommendation").textContent = report.recommendation || "";
      document.getElementById("fr-next-steps").textContent     = report.nextSteps || "";

      toast("Interview Complete!", `Final verdict: ${report.overallVerdict}`, "var(--accent)");
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RETRY / RESTART ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    document.getElementById("btn-retry").addEventListener("click", resetAll);
    document.getElementById("btn-restart").addEventListener("click", resetAll);

    function resetAll() {
      Object.assign(state, {
        resumeFile: null, resumeData: null,
        roundNumber: 1, questions: [], qIndex: 0,
        scores: [], answers: [], allRoundsData: [], currentEval: null,
      });

      document.getElementById("drop-title").textContent = "Drop your resume here";
      document.getElementById("drop-ok").style.display  = "none";
      document.getElementById("file-input").value = "";
      document.getElementById("analysis-loading").style.display = "block";
      document.getElementById("analysis-content").style.display = "none";
      setBtn("btn-start", "‚ñ∂ Start Interview", true);
      updateSteps(1);
      showPage("page-upload");
    }
  </script>
  
</body>
</html>